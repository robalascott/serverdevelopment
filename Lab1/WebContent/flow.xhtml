<ui:composition template="/templates/template.xhtml" 
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:o="http://omnifaces.org/ui">

	<h:head>
  	<h:outputScript library="primefaces" name="jquery/jquery.js" />
	</h:head>

	<ui:define name="metadata">
		<f:metadata>
			<f:viewParam name="profile" value="#{flowBean.displayName}" />
		</f:metadata>
	</ui:define>
	
    <ui:define name="content">
    	<div class="ui-widget-content ui-shadow">
	    	<h1 class="title ui-widget-header" style="margin-left:0px">Welcome to #{flowBean.displayName}s flow</h1>
	        	<ui:repeat var="message" value="#{flowBean.getMessages()}">
	        		<p:panel id="basic" header="#{message.getHeader()}" style="margin-bottom:20px">
				        <h:panelGrid columns="1" cellpadding="10">
				            <h:outputText value = "#{message.message}"/>
				        </h:panelGrid>
				    </p:panel>
	        	</ui:repeat>
	        <div class="message">
		        <o:form includeViewParams="true">
		       	 <p:growl id="growl" showDetail="true" autoUpdate="true" />
		        	<div>
		        		<p:inputTextarea rows="6" cols="50" value="#{flowBean.message}" style="margin-left:0px"/>
		        	</div>
		        	<div>
		        		<p:commandButton styleClass="ui-priority-primary contentbutton" value="Post" action="#{flowBean.post()}" />
		        	</div>
		        </o:form>
	        </div>
        </div>
    </ui:define>
</ui:composition>
